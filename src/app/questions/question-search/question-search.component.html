<div class="mx-auto" style="max-width:42rem;">
  <!-- search -->
  <div class="position-sticky py-3 bg-white" style="top:56px;">
    <form [formGroup]="searchForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="d-flex justify-content-between">
        <div class="flex-grow position-relative">
          <input id="search-box" class="form-control" #sb formControlName="search" autocomplete="off" placeholder="Search Questions"
            (keyup.enter)="sb.blur()" (keyup)="searchTags(sb.value, sb.selectionEnd)" (click)="searchTags(sb.value, sb.selectionEnd)" />
          <ul id="live-suggest" class="list-unstyled bg-white text-muted border border-light w-100">
            <li *ngFor="let tag of tags$ | async"
                (click)="onSelectTag(sb.value, sb.selectionEnd, tag.name); sb.focus();"
                class="d-flex justify-content-between px-3">
              <div class="rm-auto">{{tag.name}}</div>
              <div>{{tag.question_count}}</div>
            </li>
          </ul>
        </div>
        <div class="ml-2">
          <button class="btn btn-secondary" role="button"><span class="oi oi-menu"></span></button>
          <button class="btn btn-primary font-weight-bold" role="button" routerLink="/questions/new">New</button>
        </div>
      </div>
    </form>
    <small class="d-block text-muted mt-1" style="border-bottom:1px solid #ccc;">{{(questions$ | async)?.count || 0}} Results</small>
  </div>

  <!-- search results -->
  <ul class="list-unstyled mb-3">
    <li *ngFor="let question of (questions$ | async)?.results" class="d-flex flex-column align-items-start mb-3">
      <div class="d-flex w-100 justify-content-between">
        <small class="text-muted">
          <a [routerLink]="['/questions', question.id]">#{{question.id}}</a> &middot;
          <a [routerLink]="['/users', question.created_by]">{{question.created_by}}</a> &middot;
          <span>{{question.created_on | age}}</span>
          </small>
      </div> <!-- ./d-flex -->
      <p class="link mb-0" (click)="question.showAnswer = !question.showAnswer">
        <span>{{question.text}}</span>
        <span *ngIf="question.showAnswer" class="text-success">{{question.answer}}</span>
      </p>
    </li> <!-- ./list-group-item -->
  </ul>

      <ngb-pagination *ngIf="count && page" class="d-flex justify-content-center" (pageChange)="onPageChange($event)"
        [collectionSize]="count" [page]="page" [pageSize]="pageSize" [maxSize]="5" [rotate]="true" [ellipses]="false"></ngb-pagination>
</div>